id: ARKAEXT01-SUBS-CI
version: 1.1.0
title: "Extension CI — Subscriptions locales"
isolation: true
description: |
  Active les handlers locaux pour le pipeline CI (GitHub issues, synchronisation embeddings,
  snapshot ADR). Ce pack n'altère pas les briques Core et peut être activé via un override profil.
override:
  ARKORE16-EVENT-BUS:
    dispatch:
      local:
        base_dir: "scripts/handlers/"
    subscriptions:
      - on: US_CREATED
        using: local
        run: "us_created__issue_links.js"
        args: ["--provider", "github"]
      - on: OWNER_CONFIRMATION_REQUESTED
        using: webhook
        run: "${SLACK_WEBHOOK}"
      - on: MEMORY_UPDATED
        using: local
        run: "memory_updated__sync_embeddings.sh"
      - on: DELIVERY_RECEIVED
        using: local
        run: "delivery_received__adr_snapshot.js"
contracts:
  invariants:
    - "scripts/handlers/* du pack existent et sont exécutables"
