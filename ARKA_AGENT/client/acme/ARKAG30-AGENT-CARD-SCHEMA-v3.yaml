id: ARKAG30-AGENT-CARD-SCHEMA
version: 3.0.0
type: schema
description: "Schéma normatif v3 des cartes agents, basé sur un modèle Domaine + CRUD."
fields:
  # ... (champs d'identité, provider, etc. restent inchangés)

  # NOUVELLE SECTION PERMISSIONS
  - key: permissions
    type: object
    required: true
    fields:
      # Le cœur du modèle : une liste de droits par domaine
      - key: domains
        type: [object]
        required: true
        fields:
          - { key: name, type: string, required: true } # Nom du domaine (ex: work_items)
          - { key: crud, type: [string], required: true } # Liste des droits: [CREATE, READ, UPDATE, DELETE]

      # Contrôle d'accès au système de fichiers, conservé pour sa précision
      - key: filesystem
        type: object
        required: false
        fields:
          - { key: allow_paths, type: [string], required: false }
          - { key: deny_paths,  type: [string], required: false }

  # ... (les autres champs comme persona, memory, etc. restent inchangés)